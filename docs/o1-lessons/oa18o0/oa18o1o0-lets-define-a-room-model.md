# ç›®æ¨™

ã‚µãƒ¼ãƒãƒ¼ã«ã€éƒ¨å±‹ã‚’è¨˜æ†¶ã—ãŸã„  

# æƒ…å ±

ã“ã®è¨˜äº‹ã¯ Lesson 1. ã‹ã‚‰é †ã«å…¨éƒ¨ã‚„ã£ã¦ã“ãªã„ã¨ ã‚½ãƒ¼ã‚¹ãŒè¶³ã‚Šãšå®Ÿè¡Œã§ããªã„ã®ã§æ³¨æ„ã•ã‚ŒãŸã„  

| What is   | This is                                                                                                 |
| --------- | ------------------------------------------------------------------------------------------------------- |
| Lesson 1. | ğŸ“– [Djangoã¨Dockerã§ã‚²ãƒ¼ãƒ å¯¾å±€ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚ã†ï¼](https://qiita.com/muzudho1/items/eb0df0ea604e1fd9cdae) |

ã“ã®è¨˜äº‹ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£:  

| What is          | This is                                   |
| ---------------- | ----------------------------------------- |
| OS               | Windows10                                 |
| Container        | Docker                                    |
| Database         | Postgresql, (Redis)                       |
| Program Language | Python 3                                  |
| Web framework    | Django                                    |
| Auth             | allauth                                   |
| Frontend         | Vuetify                                   |
| Data format      | JSON                                      |
| Others           | (Socket), Web socket                      |
| Editor           | Visual Studio Code ï¼ˆä»¥ä¸‹ VSCode ã¨è¡¨è¨˜ï¼‰ |

å‚è€ƒã«ã—ãŸå…ƒè¨˜äº‹ã¯ ğŸ“–[Djangoã§CRUD](https://qiita.com/zaburo/items/ab7f0eeeaec0e60d6b92) ã ã€‚  
ã‚ãŸã—ã®è¨˜äº‹ã¯å˜ã« **ã‚„ã£ã¦ã¿ãŸ** ãã‚‰ã„ã®ä½ç½®ã¥ã‘ã   

ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’æŠœç²‹ã™ã‚‹ã¨ ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹  

```plaintext
    â”œâ”€â”€ ğŸ“‚ src1                            # ã‚ãªãŸã®Djangoã‚µãƒ¼ãƒãƒ¼é–‹ç™ºç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã€‚ä»»æ„ã®åå‰
    â”‚   â”œâ”€â”€ ğŸ“‚ apps1
    â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ allauth_customized_v1    # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ portal_v1                # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ practice_v1              # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ tic_tac_toe_v1           # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    â”‚   â”‚   â””â”€â”€ ğŸ“‚ tic_tac_toe_v2           # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ migrations
    â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ static
    â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“‚ tic_tac_toe_v2
    â”‚   â”‚       â”‚       â”œâ”€â”€ ğŸ“‚ gui
    â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ ğŸ“‚ connection
    â”‚   â”‚       â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ v1o0.js
    â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ ğŸ“‚ incoming_messages
    â”‚   â”‚       â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ v1o0.js
    â”‚   â”‚       â”‚       â”‚   â””â”€â”€ ğŸ“‚ outgoing_messages
    â”‚   â”‚       â”‚       â”‚       â””â”€â”€ ğŸ“„ v1o0.js
    â”‚   â”‚       â”‚       â””â”€â”€ ğŸ“‚ think
    â”‚   â”‚       â”‚           â”œâ”€â”€ ğŸ“‚ concepts
    â”‚   â”‚       â”‚           â”‚   â””â”€â”€ ğŸ“„ v1o0.js
    â”‚   â”‚       â”‚           â”œâ”€â”€ ğŸ“‚ engine
    â”‚   â”‚       â”‚           â”‚   â””â”€â”€ ğŸ“„ v1o0.js
    â”‚   â”‚       â”‚           â”œâ”€â”€ ğŸ“‚ judge_ctrl
    â”‚   â”‚       â”‚           â”‚   â””â”€â”€ ğŸ“„ v1o0.js
    â”‚   â”‚       â”‚           â”œâ”€â”€ ğŸ“‚ position
    â”‚   â”‚       â”‚           â”‚   â””â”€â”€ ğŸ“„ v1o0.js
    â”‚   â”‚       â”‚           â”œâ”€â”€ ğŸ“‚ things
    â”‚   â”‚       â”‚           â”‚   â””â”€â”€ ğŸ“„ v1o0.js
    â”‚   â”‚       â”‚           â””â”€â”€ ğŸ“‚ user_ctrl
    â”‚   â”‚       â”‚               â””â”€â”€ ğŸ“„ v1o0.js
    â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ templates
    â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“‚ tic_tac_toe_v2
    â”‚   â”‚       â”‚       â”œâ”€â”€ ğŸ“‚ gui
    â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ ğŸ“‚ match_application
    â”‚   â”‚       â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ v1o0.html
    â”‚   â”‚       â”‚       â”‚   â””â”€â”€ ğŸ“‚ playing
    â”‚   â”‚       â”‚       â”‚       â”œâ”€â”€ ğŸ“„ v1o0.html
    â”‚   â”‚       â”‚       â”‚       â””â”€â”€ ğŸ“„ v1o1o0.html.txt
    â”‚   â”‚       â”‚       â””â”€â”€ ğŸ“‚ think
    â”‚   â”‚       â”‚           â””â”€â”€ ğŸ“‚ engine_manual
    â”‚   â”‚       â”‚               â””â”€â”€ ğŸ“„ v1o0.html
    â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ views
    â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“‚ gui
    â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ match_application
    â”‚   â”‚       â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ v1o0
    â”‚   â”‚       â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚       â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ v_render.py
    â”‚   â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“‚ playing
    â”‚   â”‚       â”‚   â”‚       â””â”€â”€ ğŸ“‚ v1o0
    â”‚   â”‚       â”‚   â”‚           â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚       â”‚   â”‚           â””â”€â”€ ğŸ“„ v_render.py
    â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“‚ think
    â”‚   â”‚       â”‚       â””â”€â”€ ğŸ“‚ engine_manual
    â”‚   â”‚       â”‚           â””â”€â”€ ğŸ“‚ v1o0
    â”‚   â”‚       â”‚               â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚       â”‚               â””â”€â”€ ğŸ“„ v_render.py
    â”‚   â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚       â”œâ”€â”€ ğŸ“„ admin.py
    â”‚   â”‚       â”œâ”€â”€ ğŸ“„ apps.py
    â”‚   â”‚       â””â”€â”€ ğŸ“„ tests.py
    â”‚   â”œâ”€â”€ ğŸ“‚ data
    â”‚   â”œâ”€â”€ ğŸ“‚ project1                  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ asgi.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ settings_secrets_example.txt
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ settings.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ urls_accounts.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ urls_practice.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ urls_tic_tac_toe_v1.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ urls_tic_tac_toe_v2.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ urls.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ws_urls_tic_tac_toe_v1.py
    â”‚   â”‚   â””â”€â”€ ğŸ“„ wsgi.py
    â”‚   â”œâ”€â”€ ğŸ“‚ project2                  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
    â”‚   â”œâ”€â”€ ğŸ³ docker-compose-project2.yml
    â”‚   â”œâ”€â”€ ğŸ³ docker-compose.yml
    â”‚   â”œâ”€â”€ ğŸ³ Dockerfile
    â”‚   â”œâ”€â”€ ğŸ“„ manage.py
    â”‚   â””â”€â”€ ğŸ“„ requirements.txt
    â”œâ”€â”€ ğŸ“‚ src2_local                      # Djangoã¨ã¯é–¢ä¿‚ãªã„ã‚‚ã®
    â”‚    â”œâ”€â”€ ğŸ“‚ sockapp1
    â”‚    â””â”€â”€ ğŸ“‚ websockapp1
    â””â”€â”€ ğŸ“„ .gitignore
```

# æ‰‹é †

## Step OA18o1o0g1o0 Dockerã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•

ğŸ‘‡ ï¼ˆã—ã¦ã„ãªã‘ã‚Œã°ï¼‰ Docker ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ãŠã„ã¦ã»ã—ã„  

```shell
# docker-compose.yml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã„ã¦ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã¸ç§»å‹•ã—ã¦ã»ã—ã„
cd src1

# Docker ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
docker-compose up
```

## Step OA18o1o0g2o0 ãƒ¢ãƒ‡ãƒ«ä½œæˆ - room/v1o0.py ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
    â””â”€â”€ ğŸ“‚ src1
        â””â”€â”€ ğŸ“‚ apps1
            â””â”€â”€ ğŸ“‚ practice_v1              # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
                â””â”€â”€ ğŸ“‚ models
                    â””â”€â”€ ğŸ“‚ room
ğŸ‘‰                      â””â”€â”€ ğŸ“„ v1o0.py
```

```py
# See also: https://qiita.com/zaburo/items/ab7f0eeeaec0e60d6b92
from django.db import models


class Room(models.Model):
    """OA18o1o0g2o0 éƒ¨å±‹ã®ãƒ¢ãƒ‡ãƒ«"""

    # ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ä»•æ§˜ã‚’æ±ºã‚ã‚‹æ„Ÿã˜ã§

    # éƒ¨å±‹å
    # -----
    # Example: Elephant
    name = models.CharField('éƒ¨å±‹å', max_length=25)

    # å¯¾å±€è€…_å…ˆæ‰‹Id
    # ------------
    # Example: 1
    sente_id = models.IntegerField('å¯¾å±€è€…_å…ˆæ‰‹Id', null=True, blank=True)

    # å¯¾å±€è€…_å¾Œæ‰‹Id
    # ------------
    # Example: 2
    gote_id = models.IntegerField('å¯¾å±€è€…_å¾Œæ‰‹Id', null=True, blank=True)

    # ç›¤é¢
    # ----
    # Example: ..O.X.X..
    # +--+--+--+
    # |  |  | O|
    # +--+--+--+
    # |  | X|  |
    # +--+--+--+
    # | X|  |  |
    # +--+--+--+
    board = models.CharField('ç›¤é¢', max_length=9)

    # æ£‹è­œ
    # ----
    # Example: 426
    record = models.CharField('æ£‹è­œ', max_length=9)

    def __str__(self):
        """ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ–‡å­—åˆ—ã«ã—ãŸã¨ãè¿”ã‚‹ã‚‚ã®"""
        return f"{self.name} room"
```

## Step OA18o1o0g3o0 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ãƒ¢ãƒ‡ãƒ«ç™»éŒ² - admin.py ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
    â””â”€â”€ ğŸ“‚ src1
        â””â”€â”€ ğŸ“‚ apps1
            â””â”€â”€ ğŸ“‚ practice_v1              # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
                â”œâ”€â”€ ğŸ“‚ models
                â”‚   â””â”€â”€ ğŸ“‚ room
                â”‚       â””â”€â”€ ğŸ“„ v1o0.py
ğŸ‘‰              â””â”€â”€ ğŸ“„ admin.py
```

ğŸ‘‡ è¿½åŠ ã—ãŸã‚‚ã®ã ã‘ç¤ºã™  

```py
# ...ç•¥...


# OA18o1o0g3o0 å¯¾å±€éƒ¨å±‹
from .models.room.v1o0 import Room
#    -----------------        ----
#    1                        2
# 1. ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ `models/room/v1o0.py` ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­æŠœã
#                                      ----------------
# 2. ã‚¯ãƒ©ã‚¹


# ...ç•¥...


# Register your models here.
#   â””â”€â”€ * ç®¡ç†ç”»é¢ã«ãƒ¢ãƒ‡ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹
#       â””â”€â”€ * `manage.py makemigrations` ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œå¯¾è±¡ã«ãªã‚‹


# ...ç•¥...


# OA18o1o0g3o0 å¯¾å±€éƒ¨å±‹
admin.site.register(Room)
```

ã“ã‚Œã«ã‚ˆã‚Šã€ ğŸ‘‡ ä»¥ä¸‹ã®ï¼’ã¤ã‚’æº€ãŸã™  

* ç®¡ç†ç”»é¢ã« Room ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
* ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å¯¾è±¡ã«ãªã‚‹

## Step OA18o1o0g4o0 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - makemigrations ã‚³ãƒãƒ³ãƒ‰

```shell
# docker-compose.yml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã„ã¦ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã¸ç§»å‹•ã—ã¦ã»ã—ã„
cd src1

docker-compose run --rm web python3 manage.py makemigrations practice_v1 --settings project1.settings
#                                                            -----------            -----------------
#                                                            1                      2
# 1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
# 2. src1/project1/settings.py
#         -----------------
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹  

```plaintext
    â””â”€â”€ ğŸ“‚ src1
        â””â”€â”€ ğŸ“‚ apps1
            â””â”€â”€ ğŸ“‚ practice_v1                      # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
                â”œâ”€â”€ ğŸ“‚ migrations
                â”‚   â”œâ”€â”€ ğŸ“„ ...ç•¥...
ğŸ‘‰              â”‚   â””â”€â”€ ğŸ“„ 0004_room.py          # ãƒ•ã‚¡ã‚¤ãƒ«åã¯ä¸€ä¾‹ã§ã™
                â”œâ”€â”€ ğŸ“‚ models
                â”‚   â””â”€â”€ ğŸ“‚ room
                â”‚       â””â”€â”€ ğŸ“„ v1o0.py
                â””â”€â”€ ğŸ“„ admin.py
```

ğŸ‘† ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ•ã‚¡ã‚¤ãƒ« ã¨å‘¼ã¶ã‚‰ã—ã„  

ã¾ã  ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæ¥­ã¯å®Œäº†ã—ã¦ã„ãªã„  

## Step OA18o1o0g5o0 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ - migrate ã‚³ãƒãƒ³ãƒ‰

```shell
docker-compose run --rm web python manage.py migrate
```

ğŸ‘† ã“ã“ã¾ã§ã‚„ã£ã¦ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ã¨ã„ã†ä½œæ¥­ãŒçµ‚ã‚ã‚‹ã‚‰ã—ã„  

## Step OA18o1o0g6o0 ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§Webã®ç®¡ç†ç”»é¢ã¸ã‚¢ã‚¯ã‚»ã‚¹

ğŸ‘‡ ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã“ã¨  

ğŸ“– [http://localhost:8000/admin](http://localhost:8000/admin)  

ğŸ‘‡ ç”»é¢å·¦ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°OK  

```plaintext
+----------------------------------+
| PRACTICE                         |
+-------------+--------+-----------+
| Rooms       | â• Add | ğŸ–Š Change |
+-------------+--------+-----------+
```

## Step OA18o1o0g7o0 Room ã‚’ï¼“ã¤ã»ã©è¿½åŠ ã—ã¦ã»ã—ã„

`â• Add` ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã»ã—ã„  

```plaintext
éƒ¨å±‹å:
      ----------------

å¯¾å±€è€…_å…ˆæ‰‹Id:
             ----------------

å¯¾å±€è€…_å¾Œæ‰‹Id:
             ----------------

ç›¤é¢:
    ----------------

æ£‹è­œ:
    ----

                [Save and add another] [Save and continue editing] [SAVE]
```

ğŸ‘†å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ãŒå‡ºã¦ãã‚‹ã‹ã‚‰ã€ï¼“ä»¶ã»ã©é©å½“ã«è¿½åŠ ã—ã¦ã»ã—ã„ã€‚  

å…¥åŠ›ä¾‹:  

```plaintext
éƒ¨å±‹å        å¯¾å±€è€…_å…ˆæ‰‹Id  å¯¾å±€è€…_å¾Œæ‰‹Id  ç›¤é¢       æ£‹è­œ
-----------  ------------  ------------  ---------  ---------
Elephant                1             2  XOXOXOXOX  012345678
Giraffe                 3             4  XOXOXOXOX  012345678
Lion                    5             6  XOXOXOXOX  012345678
```

`[SAVE]` ãŒè¿½åŠ ãƒœã‚¿ãƒ³ã®ã‚ˆã†ã ã€‚  

## Step OA18o1o0g8o0 ç™»éŒ²ã—ãŸ Room ã‚’ç¢ºèªã—ã¦ã»ã—ã„

`â• Add` ã®å·¦å´ã«ã‚ã‚‹ `Rooms` ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã»ã—ã„ã€‚  
ä¸€è¦§ç”»é¢ãŒå‡ºã¦ãã‚‹  

ï¼“ã¤ã®éƒ¨å±‹ãŒå‡ºã¦ãã‚Œã°OKã   

# æ¬¡ã®è¨˜äº‹

ğŸ“– [Djangoã§ã‚²ãƒ¼ãƒ å¯¾å±€éƒ¨å±‹ã‚’ä¸€è¦§ã—ã‚ˆã†ï¼](https://qiita.com/muzudho1/items/346c286d4f99850afe23)  
