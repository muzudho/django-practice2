{% load static %} {% comment %} üëà„ÅÇ„Å®„Åß static "URL" „Çí‰Ωø„ÅÜ„ÅÆ„Åß load static „Åó„Åæ„Åô {% endcomment %}
<!DOCTYPE html>
<html>
    <head>
        <link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}" />
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />
        <title>Tic Tac Toe</title>
    </head>
    <body>
        <div id="app">
            <v-app>
                <v-main>
                    <v-container>
                        <h1>TIC TAC TOE</h1>
                        <h3>Welcome to room_{{dj_room_name}}</h3>
                    </v-container>

                    <form name="form1" method="POST">
                        {% csrf_token %}
                        <v-container>
                            <v-row justify="center" dense>
                                <v-col>
                                    {% comment %} Vue „Åß‰∫åÈáçÊ≥¢Êã¨ÂºßÔºàbracesÔºâ„ÅØÂ§âÊï∞„ÅÆÂ±ïÈñã„Å´‰Ωø„Å£„Å¶„ÅÑ„Çã„Åì„Å®„Åã„Çâ„ÄÅ Python „ÅÆ„ÉÜ„É≥„Éó„É¨„Éº„Éà„Å´‰∫åÈáçÊ≥¢Êã¨Âºß„ÇíÂ§âÊï∞„ÅÆÂ±ïÈñã„Å´‰Ωø„Çè„Å™„ÅÑ„Çà„ÅÜ verbatim „ÅßÊåáÁ§∫„Åó„Åæ„Åô„ÄÇ {% endcomment %}
                                    <!-- -->
                                    {% verbatim %}
                                    <v-btn id="square0" v-on:click="clickSquare(0)">{{label0}}</v-btn>
                                    <v-btn id="square1" v-on:click="clickSquare(1)">{{label1}}</v-btn>
                                    <v-btn id="square2" v-on:click="clickSquare(2)">{{label2}}</v-btn>
                                    {% endverbatim %}
                                </v-col>
                            </v-row>
                            <v-row justify="center" dense>
                                <v-col>
                                    {% verbatim %}
                                    <v-btn id="square3" v-on:click="clickSquare(3)">{{label3}}</v-btn>
                                    <v-btn id="square4" v-on:click="clickSquare(4)">{{label4}}</v-btn>
                                    <v-btn id="square5" v-on:click="clickSquare(5)">{{label5}}</v-btn>
                                    {% endverbatim %}
                                </v-col>
                            </v-row>
                            <v-row justify="center" dense>
                                <v-col>
                                    {% verbatim %}
                                    <v-btn id="square6" v-on:click="clickSquare(6)">{{label6}}</v-btn>
                                    <v-btn id="square7" v-on:click="clickSquare(7)">{{label7}}</v-btn>
                                    <v-btn id="square8" v-on:click="clickSquare(8)">{{label8}}</v-btn>
                                    {% endverbatim %}
                                </v-col>
                            </v-row>
                        </v-container>

                        <!-- `po_` „ÅØ POSTÈÄÅ‰ø°„Åô„Çã„Éë„É©„É°„Éº„Çø„ÉºÂêç„ÅÆÁõÆÂç∞ -->
                        <input type="hidden" name="po_room_name" value="{{dj_room_name}}" />
                        <input type="hidden" name="po_my_turn" value="{{dj_my_turn}}" />
                    </form>
                    {% block footer_section1 %}
                    <!-- „Éú„Çø„É≥Á≠â„ÇíËøΩÂä†„Åó„Åü„ÅÑ„Å™„Çâ„ÄÅ„Åì„Åì„Å´Êåø„Åó„Åì„ÇÅ„Çã -->
                    {% endblock footer_section1 %}
                    <v-container>
                        {% verbatim %}
                        <v-alert type="success" v-show="isGameover">{{gameover_message}}</v-alert>
                        {% endverbatim %}
                        <v-alert type="info" v-show="isYourTurn">Your turn. Place your move <strong>{{dj_my_turn}}</strong></v-alert>
                        <v-alert type="warning" v-show="isItOpponentsTurnToMove">Wait for other to place the move</v-alert>
                        {% verbatim %}
                        <v-alert type="warning" v-show="isReconnecting">Reconnecting... {{reconnectionCount}}/{{reconnectionMax}}</v-alert>
                        {% endverbatim %}
                        <v-alert type="error" v-show="isSocketClosed">Lost connection</v-alert>
                    </v-container>
                </v-main>
            </v-app>
        </div>

        <script src="{% static 'tic_tac_toe_v2/o1/think/things.js' %}"></script>
        <script src="{% static 'tic_tac_toe_v2/o1/think/concepts.js' %}"></script>
        <script src="{% static 'tic_tac_toe_v2/o1/think/position.js' %}"></script>
        <script src="{% static 'tic_tac_toe_v2/o1/think/user_ctrl.js' %}"></script>
        <script src="{% static 'tic_tac_toe_v2/o1/think/judge_ctrl.js' %}"></script>
        <script src="{% static 'tic_tac_toe_v2/o1/think/engine.js' %}"></script>
        <script src="{% static 'tic_tac_toe_v2/o1/gui/connection.js' %}"></script>
        <script src="{% static 'tic_tac_toe_v2/o1/gui/incoming_messages.js' %}"></script>
        <script src="{% static 'tic_tac_toe_v2/o1/gui/outgoing_messages.js' %}"></script>
        <!--            ==================================================
                        1
        1. host1/apps1/tic_tac_toe_v2/static/tic_tac_toe_v2/o1/gui/outgoing_messages.js
                                      =================================================
        -->

        <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
        <script>
            // ÈÉ®Â±ãÂêç
            const roomName = document.forms["form1"]["po_room_name"].value;
            // Êé•Á∂öÊñáÂ≠óÂàó
            // `dj_` „ÅØ Django„Åß„É¨„É≥„ÉÄ„Éº„Åô„Çã„Éë„É©„É°„Éº„Çø„ÉºÂêç„ÅÆÁõÆÂç∞
            const connectionString = `ws://${window.location.host}{{dj_path_of_ws_playing}}${roomName}/`;
            //                        ----]----------------------]-------------------------------------
            //                        1    2                      3
            // 1. „Éó„É≠„Éà„Ç≥„É´ÔºàWeb socketÔºâ
            // 2. „Éõ„Çπ„Éà „Ç¢„Éâ„É¨„Çπ
            // 3. „Éë„Çπ
            console.log(`[HTML] convertPartsToConnectionString roomName=${roomName} connectionString=${connectionString}`);

            // Âèó‰ø°„É°„ÉÉ„Çª„Éº„Ç∏‰ΩúÊàêËÄÖ
            const incomingMessages = new IncomingMessages();
            incomingMessages.onStart = (message)=>{
                vue1.onStart();
            }
            incomingMessages.onEnd = (message, winner)=>{
                vue1.onGameover(winner);
            }
            incomingMessages.onMoved = (message, sq, piece_moved)=>{
                console.log(`[HTML onMoved] Ëá™ÂàÜ„ÅÆÊâãÁï™:${vue1.engine.position.turn.me}`);

                if (piece_moved != vue1.engine.position.turn.me) {
                    // Áõ∏Êâã„ÅÆÊâãÁï™„Å™„Çâ„ÄÅËá™Âãï„ÅßÂãï„Åã„Åó„Åæ„Åô
                    vue1.engine.userCtrl.doMove(vue1.engine.position, piece_moved, sq);

                    // „ÄåÁõ∏Êâã„ÅÆÊâãÁï™„ÅßÂãï„Åã„Åó„Åü„Äç„Ç¢„É©„Éº„Éà„ÅÆÂèñ„Çä„Åï„Åí
                    vue1.isItOpponentsTurnToMove = false;
                }

                // „Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÂà§ÂÆö
                vue1.engine.judgeCtrl.doJudge(vue1.engine.position);
            }

            // ÈÄÅ‰ø°„É°„ÉÉ„Çª„Éº„Ç∏‰ΩúÊàêËÄÖ
            const outgoingMessages = new OutgoingMessages();

            // Êé•Á∂ö
            var connection = new Connection(
                roomName,
                connectionString,
                // „Çµ„Éº„Éê„Éº„Åã„Çâ„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂèó‰ø°„Åó„Åü„Å®„Åç
                incomingMessages,
                // Web„ÇΩ„Ç±„ÉÉ„Éà„ÇíÈñã„Åã„Çå„Åü„Å®„Åç
                () => {
                    console.log("WebSockets connection created.");
                    let response = outgoingMessages.createStart();
                    connection.send(response);
                },
                // Web„ÇΩ„Ç±„ÉÉ„Éà„ÅåÈñâ„Åò„Çâ„Çå„Åü„Å®„Åç
                (exception) => {
                    console.log(`Socket is closed. Reconnect it. ${exception.reason}`);
                    // ÂÜçÊé•Á∂ö„ÅÆÂàùÂõû„Éà„É©„Ç§„ÇíÊõ∏„ÅÑ„Å¶„Çà„ÅÑ„ÅÆ„ÅØ„Åì„ÅÆ„Çø„Ç§„Éü„É≥„Ç∞„Åß„Åô
                    connection.reconnect();
                },
                // „Ç®„É©„ÉºÊôÇ
                (exception) => {
                    console.log(`Socket is error. ${exception.reason}`);
                },
                /**
                 * ÂÜçÊé•Á∂ö„ÅÆ„Åü„ÇÅ„ÅÆ„Ç§„É≥„Çø„Éº„Éê„É´„ÅÆÈÄöÁü•
                 *
                 * „Ç¢„É©„Éº„Éà„Åå„ÄÅÊé•Á∂ö‰∏≠„Å´Áü≠„ÅèÈùûË°®Á§∫„ÄÅÊ¨°„ÅÆÊé•Á∂ö„Åæ„Åß„ÅÆÂæÖÊ©ü‰∏≠„Å´Èï∑„ÅèË°®Á§∫„Å®„ÄÅÈÄÜ„Å´„Å™„Å£„Å¶„ÅÑ„Çã„Åå„ÄÅ„Åù„ÅÜ„Åó„Å™„ÅÑ„Å®Ë°®Á§∫„ÅåÁü≠„Åè„Å™„Å£„Å¶„Åó„Åæ„ÅÜ
                 *
                 * @param {bool} isBeginWait - Ê¨°„ÅÆÂÜçÊé•Á∂ö„Åæ„Åß„ÅÆÂæÖ„Å°ÊôÇÈñì„Å´ÂÖ•„Å£„Åü„ÇâÁúü
                 * @param {int} retryCount - „É™„Éà„É©„Ç§ÂõûÊï∞
                 * @param {int} retryMax - „É™„Éà„É©„Ç§ÂõûÊï∞‰∏äÈôê
                 */
                (isBeginWait, retryCount, retryMax)=>{
                    // console.log(`WebSockets reconnection isBeginWait:${isBeginWait}`);
                    vue1.isReconnecting = isBeginWait;
                    vue1.reconnectionCount = retryCount;
                    vue1.reconnectionMax = retryMax;
                },
                /**
                 * ÂÜçÊé•Á∂ö„ÇíË´¶„ÇÅ„Åü„Å®„Åç
                 */
                ()=>{
                    vue1.isSocketClosed = true;
                });

            let vue1 = new Vue({
                el: "#app",
                vuetify: new Vuetify(),
                data: {
                    // ÊÄùËÄÉ„Ç®„É≥„Ç∏„É≥
                    engine: new Engine(
                        // `po_` „ÅØ POSTÈÄÅ‰ø°„Åô„Çã„Éë„É©„É°„Éº„Çø„ÉºÂêç„ÅÆÁõÆÂç∞
                        // Ëá™ÂàÜ„ÅÆÁï™„ÄÇ X „Åã O
                        document.forms["form1"]["po_my_turn"].value,
                        // „É¶„Éº„Ç∂„Éº„Ç≥„É≥„Éà„É≠„Éº„É´
                        new UserCtrl(
                            /**
                             * onDidMove - Èßí„ÇíÁΩÆ„ÅÑ„Åü„ÅÇ„Å®
                             *
                             * * ÊâãÁï™„Åå„Å≤„Å£„Åè„ÇäËøî„Å£„Å¶„ÅÑ„Çã„Åì„Å®„Å´Ê≥®ÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ
                             *
                             * @param {int} sq - „Éû„ÇπÁï™Âè∑
                             * @param {string} pieceMoved - Âãï„Åã„Åó„ÅüÈßí
                             */
                            (sq, pieceMoved) => {
                                // „Éú„Çø„É≥„ÅÆ„É©„Éô„É´„ÇíÊõ¥Êñ∞
                                vue1.setLabelOfButton(sq, pieceMoved);

                                console.log(`[Engine onDidMove] sq=${sq} pieceMoved=${pieceMoved}`);

                                // Ëá™ÂàÜ„ÅÆÊåá„ÅóÊâã„Å™„ÇâÈÄÅ‰ø°
                                if (vue1.engine.position.turn.me == pieceMoved) {
                                    let response = outgoingMessages.createDoMove(sq, pieceMoved);
                                    connection.send(response);
                                }

                                // ÊâãÁï™„ÅÆÂÜçÊèèÁîª„ÇíÈÄöÁü•
                                vue1.raiseMyTurnChanged();
                            }
                        ),
                        // ÂØ©Âà§„Ç≥„É≥„Éà„É≠„Éº„É´
                        new JudgeCtrl(
                            /**
                             * onDoJudge - Âà§Êñ≠„Åó„Åü„Å®„Åç
                             *
                             * @param {*} gameoverSet - „Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÈõÜÂêà
                             */
                            (gameoverSet) => {
                                vue1.engine.gameoverSet = gameoverSet;
                                let response;

                                switch (gameoverSet.value) {
                                    case GameoverSet.won:
                                        // Ëá™ÂàÜ„ÅåÂãù„Å£„Åü„Å®„Åç
                                        response = outgoingMessages.createWon(vue1.engine.position.turn.me);
                                        connection.send(response);
                                        break;
                                    case GameoverSet.draw:
                                        // Âºï„ÅçÂàÜ„Åë„Åü„Å®„Åç
                                        response = outgoingMessages.createDraw();
                                        connection.send(response);
                                        break;
                                    case GameoverSet.lost:
                                        // Ëá™ÂàÜ„ÅåË≤†„Åë„Åü„Å®„Åç
                                        break;
                                    case GameoverSet.none:
                                        // „Å™„Çì„Åß„ÇÇ„Å™„Åã„Å£„Åü„Å®„Åç
                                        break;
                                    default:
                                        throw new Error(`Unexpected gameoverSet.value=${gameoverSet.value}`);
                                }
                            }
                        )
                    ),
                    label0: PC_EMPTY_LABEL,
                    label1: PC_EMPTY_LABEL,
                    label2: PC_EMPTY_LABEL,
                    label3: PC_EMPTY_LABEL,
                    label4: PC_EMPTY_LABEL,
                    label5: PC_EMPTY_LABEL,
                    label6: PC_EMPTY_LABEL,
                    label7: PC_EMPTY_LABEL,
                    label8: PC_EMPTY_LABEL,
                    isReconnecting: false,
                    reconnectionCount: 0,
                    reconnectionMax: 0,
                    isSocketClosed: false,
                    isYourTurn: false,
                    isGameover: false,
                    // „ÄåÁõ∏Êâã„ÅÆÊâãÁï™„Å´ÁùÄÊâã„Åó„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„Äç„Å®„ÅÑ„ÅÜ„Ç¢„É©„Éº„Éà„ÅÆÂèØË¶ñÊÄß
                    isItOpponentsTurnToMove: false,
                    roomState: new RoomState(RoomState.none,(oldValue, newValue)=>{
                        // changeRoomState
                        console.log(`[data roomState changeRoomState] state old=${oldValue} new=${newValue}`);
                        vue1.raiseRoomStateChanged();
                    }),
                    gameover_message : "",
                    messages: {
                        draw: "It's a draw.",
                        youLost: "You lost.",
                        youWon: "You won!",
                        {% block appendix_message %}
                        // „É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøΩÂä†„Åó„Åü„Åë„Çå„Å∞„ÄÅ„Åì„Åì„Å´Êåø„Åó„Åì„ÇÅ„Çã
                        {% endblock appendix_message %}
                    }
                },
                // page loaded
                mounted: () => {
                    // * „Åì„Åì„Åß vue1 „ÅØ„Åæ„Å†ÂàùÊúüÂåñ„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ
                    // * „Åì„Åì„Åß this „ÅØ Window „ÇíÊåá„Åó„Å¶„ÅÑ„Çã
                    console.log(`[mounted] ‚òÖdata„Çà„ÇäÂæå„ÅãÂÖà„ÅãÔºü`);
                    console.log(`[mounted] ‚òÖthis:${this}`);
                    // console.log(`[mounted] ‚òÖvue1.data.messages.youWon:${vue1.messages.youWon}`);
                },
                methods: {
                    // ÂØæÂ±ÄÈñãÂßãÊôÇ
                    onStart() {
                        console.log("[methods onStart]");

                        // „ÄåÁõ∏Êâã„ÅÆÊâãÁï™„Å´ÁùÄÊâã„Åó„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„Äç„Å®„ÅÑ„ÅÜ„Ç¢„É©„Éº„Éà„ÅÆÈùûË°®Á§∫
                        this.isItOpponentsTurnToMove = false;

                        // ÂÖà„Å´ ÂØæÂ±Ä‰∏≠Áä∂ÊÖã „Å´„Åó„Å¶„Åä„ÅÑ„Å¶„Åã„Çâ„ÄÅ„Ç®„É≥„Ç∏„É≥„Çí„Çπ„Çø„Éº„Éà„Åï„Åõ„Å¶„Åè„Å†„Åï„ÅÑ
                        this.roomState.value = RoomState.playing;
                        this.engine.start();
                        this.raisePositionChanged();


                        // „Éú„Çø„É≥„ÅÆ„É©„Éô„É´„Çí„ÇØ„É™„Ç¢„Éº
                        for (let sq = 0; sq < BOARD_AREA; sq += 1) {
                            this.setLabelOfButton(sq, "");
                        }

                        // „ÉÄ„É≥„Éó
                        this.dump();
                    },
                    /**
                     * Âçá„Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Åü„Å®„Åç
                     * @param {*} sq - Square; 0 <= sq
                     */
                    clickSquare(sq) {
                        console.log(`[methods clickSquare] gameoverSet:${this.engine.gameoverSet.value}`);
                        if (this.engine.gameoverSet.value != GameoverSet.none) {
                            // Ban on illegal move
                            console.log(`Ban on illegal move. gameoverSet:${this.engine.gameoverSet.value}`);
                            return;
                        }

                        if (this.engine.position.board.getPieceBySq(sq) == PC_EMPTY) {
                            if (!this.engine.position.turn.isMe) {
                                // Wait for other to place the move
                                console.log("Wait for other to place the move");
                                this.isItOpponentsTurnToMove = true;
                            } else {
                                if (this.engine.gameoverSet.value != GameoverSet.none) {
                                    // „Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÂæå„Å´Èßí„ÇíÁΩÆ„ÅÑ„Å¶„ÅØ„ÅÑ„Åë„Åæ„Åõ„Çì
                                    console.log(`warning of illegal move. gameoverSet:${this.engine.gameoverSet.value}`);
                                    return;
                                }

                                // Ëá™ÂàÜ„ÅÆ‰∏ÄÊâã
                                this.engine.userCtrl.doMove(this.engine.position, this.engine.position.turn.me, parseInt(sq));
                            }
                        }
                    },
                    /**
                     * ÂØæÂ±Ä„ÅØÁµÇ‰∫Ü„Åó„Åæ„Åó„Åü
                     */
                    onGameover(winner) {
                        console.log(`[methods onGameover] winner=${winner}`);
                        this.engine.winner = winner;
                        this.roomState.value = RoomState.none; // ÁîªÈù¢„ÇíÂØæÂ±ÄÁµÇ‰∫ÜÁä∂ÊÖã„Å∏

                        this.gameover_message = this.createGameoverMessage();
                    },
                    /**
                     * „Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÊôÇ„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏‰ΩúÊàê
                     */
                    createGameoverMessage() {
                        {% block create_gameover_message %}
                        // ËøîÂç¥ÂÄ§„ÇíÂ§â„Åà„Åü„ÅÑ„Å™„Çâ„ÄÅ„Åì„Åì„Å´Êåø„Åó„Åì„ÇÅ„Çã
                        {% endblock create_gameover_message %}

                        switch (this.engine.gameoverSet.value) {
                            case GameoverSet.draw:
                                return this.messages.draw;
                            case GameoverSet.won:
                                return this.messages.youWon;
                            case GameoverSet.lost:
                                return this.messages.youLost;
                            case GameoverSet.none:
                                // „Åì„Åì„Å´Êù•„Çã„ÅÆ„ÅØ„Åä„Åã„Åó„ÅÑ
                                return "";
                            default:
                                throw `unknown this.engine.gameoverSet.value = ${this.engine.gameoverSet.value}`;
                        }
                    },
                    /**
                     * Âçá„Éú„Çø„É≥„ÅÆ„É©„Éô„É´„ÅÆË®≠ÂÆö
                     *
                     * @param {number} sq - Square; 0 <= sq
                     * @param {*} piece - text
                     */
                    setLabelOfButton(sq, piece) {
                        console.log(`[methods setLabelOfButton] sq=${sq} piece=${piece}`);
                        switch (sq) {
                            case 0:
                                this.label0 = piece;
                                break;
                            case 1:
                                this.label1 = piece;
                                break;
                            case 2:
                                this.label2 = piece;
                                break;
                            case 3:
                                this.label3 = piece;
                                break;
                            case 4:
                                this.label4 = piece;
                                break;
                            case 5:
                                this.label5 = piece;
                                break;
                            case 6:
                                this.label6 = piece;
                                break;
                            case 7:
                                this.label7 = piece;
                                break;
                            case 8:
                                this.label8 = piece;
                                break;
                            default:
                                alert(`[Error] sq=${sq}`);
                                break;
                        }
                    },
                    /**
                     * (1) ÂØæÂ±Ä‰∏≠„Åã
                     * (2) Ëá™ÂàÜ„ÅÆÊâãÁï™„Åã
                     */
                    updateYourTurn(){
                        console.log(`[methods updateYourTurn 1] this.roomState=${this.roomState.value} ÁßÅ„ÅÆÁï™„Åã:${this.engine.position.turn.isMe}`);
                        let isYourTurn = this.roomState.value == RoomState.playing && this.engine.position.turn.isMe;

                        {% block isYourTurn_patch1 %}
                        // Êù°‰ª∂„ÇíËøΩÂä†„Åó„Åü„ÅÑ„Å™„Çâ„ÄÅ„Åì„Åì„Å´Êåø„Åó„Åì„ÇÅ„Çã
                        {% endblock isYourTurn_patch1 %}

                        console.log(`[methods updateYourTurn 2] isYourTurn=${isYourTurn}`);

                        // v-show="" „ÅØË§áÈõë„Å™„É°„ÇΩ„ÉÉ„Éâ„ÇíÊåáÂÆö„Åô„Çã„Å®Âãï„Åã„Å™„ÅÑ„Çà„ÅÜ„Å™„ÅÆ„Åß„ÄÅ„Éó„É≠„Éë„ÉÜ„Ç£„Å´„Åó„Åæ„Åô
                        this.isYourTurn = isYourTurn;
                    },
                    raiseRoomStateChanged() {
                        console.log(`[methods raiseRoomStateChanged] roomState=${this.roomState.value}`);
                        this.isGameover = this.roomState.value == RoomState.none;

                        this.updateYourTurn();
                    },
                    raiseMyTurnChanged() {
                        console.log(`[methods raiseMyTurnChanged]`);
                        this.updateYourTurn();
                    },
                    raisePositionChanged() {
                        console.log(`[methods raisePositionChanged]`);
                        this.raiseMyTurnChanged();
                    },
                    {% block methods_footer %}
                    // „É°„ÇΩ„ÉÉ„Éâ„ÇíËøΩÂä†„Åó„Åü„Åë„Çå„Å∞„ÄÅ„Åì„Åì„Å´Êåø„Åó„Åì„ÇÅ„Çã
                    {% endblock methods_footer %}
                    /**
                     * „ÉÄ„É≥„Éó
                     */
                    dump() {
                        console.log(`[DUMP] vue1\n${this.engine.dump("")}`)
                    },
                },
            });

            console.log(`[HTML] ‚òÖWSÊé•Á∂ö`);
            connection.connect();
        </script>
    </body>
</html>
